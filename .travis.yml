dist: trusty
sudo: required
language: go
go:
    - 1.14
    
addons:
  apt:
    packages:
      libpcap-dev
      
services:
    - docker
env:
    - GO_DIRS=". ./modules/classifiers ./modules/wrappers ./modules/ml ./types ./utils ./godpi_example"
script:
    - sudo docker build -t godpi-example .
    - >
        sudo docker run --entrypoint=/bin/bash
        -e TRAVIS
        -e TRAVIS_JOB_ID
        -e GO_DIRS
        godpi-example -c 'go get golang.org/x/tools/cmd/cover github.com/mattn/goveralls &&
        $GOPATH/bin/goveralls -ignore godpi_example/example_app.go -service=travis-ci'
    - ./.travis.golint.sh
    - ./.travis.govet.sh
